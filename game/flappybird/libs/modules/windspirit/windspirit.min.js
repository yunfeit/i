var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},windspirit;!function(t){var e=function(){function t(){this.lot_id=0}return t}();t.Award=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.rotate=function(t){var e=this.x,i=this.y;return this.x=Math.cos(t)*e-Math.sin(t)*i,this.y=Math.sin(t)*e+Math.cos(t)*i,this},t.prototype.mult=function(t){return this.x*=t,this.y*=t,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.plus=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t}();t.Vector=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var r=RES.getRes(t);r?n(r):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();t.AssetAdapter=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(t){function e(e){return t.call(this,RES.getRes(e))||this}return __extends(e,t),e}(egret.Bitmap);t.Bitmap=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(){function e(t,e,i,n,r){this.radius=0,this.count=0,this.petals=[],this.radius=e,this.rgba=i,this.count=n,this.point=t,this.garden=r,this.init(),this.garden.addBloom(this)}return e.prototype.draw=function(){var t=!0;this.garden.ctx.save(),this.garden.ctx.translate(this.point.x,this.point.y);for(var e in this.petals){var i=this.petals[e];i.render(),t=t&&i.isFinished}this.garden.ctx.restore(),t&&(console.log("isFinished"),this.garden.removeBloom(this))},e.prototype.init=function(){for(var e=360/this.count,i=0;i<this.count;i++){var n=t.Garden.random(t.Garden.options.petalStretch.min,t.Garden.options.petalStretch.max),r=t.Garden.random(t.Garden.options.petalStretch.min,t.Garden.options.petalStretch.max),o=t.Garden.randomInt(0,90)+i*e,a=t.Garden.random(t.Garden.options.growFactor.min,t.Garden.options.growFactor.max);this.petals.push(new t.Petal(n,r,o,e,a,this))}},e}();t.Bloom=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(){function t(){this.isLoop=!1,this.numLen=0,this.endFunc=null,this.start=0}return t}();t.FrameConfig=e;var i=function(t){function e(e){var i=t.call(this)||this;return i._curFrameIndex=0,i._config=e,i._frame=new egret.Bitmap,i.setFrame(),i.addChild(i._frame),i._timer=new egret.Timer(1e3/i._config.frameRate),i._timer.addEventListener(egret.TimerEvent.TIMER,i.update,i),i}return __extends(e,t),e.prototype.play=function(){this._timer.start()},e.prototype.stop=function(){this._timer.stop()},e.prototype.update=function(t){return this.setFrame(),this._curFrameIndex!=this._config.frameNum-1||(this._config.endFunc&&this._config.endFunc(),this._config.isLoop)?(this._curFrameIndex++,void(this._curFrameIndex%=this._config.frameNum)):void this._timer.stop()},e.prototype.setFrame=function(){var t,e=this._curFrameIndex+this._config.start;t=this._config.numLen>0?this._config.name+this.appendZero(e,this._config.numLen):this._config.name+e,this._frame.texture=RES.getRes(t)},e.prototype.appendZero=function(t,e){for(var i=t.toString(),n=i.length,r=n;e>r;r++)i="0"+i;return i},e}(egret.DisplayObjectContainer);t.FramePlay=i}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(){function e(t,i,n){void 0===n&&(n=e.options.bloomCount);var r=this;this.blooms=[],this.current=0,this.b=[],this.bloomCount=0,this.ctx=t,this.element=i,this.bloomCount=n;var o=10,a=30,s=(a-o)/this.bloomCount;this.createBloomTimer=setInterval(function(){for(var t=e.getHeartPoint(o),i=!0,n=0;n<r.b.length;n++){var h=r.b[n],c=Math.sqrt(Math.pow(h[0]-t[0],2)+Math.pow(h[1]-t[1],2));if(c<1.3*e.options.bloomRadius.max){i=!1;break}}i&&(r.b.push(t),r.createRandomBloom(t[0],t[1])),o>=a?(clearInterval(r.createBloomTimer),console.log("draw garden complete")):(o+=s,r.current++)},e.options.createBloomSpeed),this.updateTimer=setInterval(function(){r.render()},e.options.growSpeed)}return e.prototype.stop=function(){clearInterval(this.createBloomTimer),clearInterval(this.updateTimer)},e.prototype.render=function(){for(var t in this.blooms)this.blooms[t].draw()},e.prototype.addBloom=function(t){this.blooms.push(t)},e.prototype.removeBloom=function(t){var e=this.blooms.indexOf(t);-1!=e&&this.blooms.splice(e,1)},e.prototype.createRandomBloom=function(t,i){var n=e.options,r=e.randomInt(n.bloomRadius.min,n.bloomRadius.max),o=e.randomrgba(n.color.rmin,n.color.rmax,n.color.gmin,n.color.gmax,n.color.bmin,n.color.bmax,n.color.opacity),a=e.randomInt(n.petalCount.min,n.petalCount.max);this.createBloom(t,i,r,o,a)},e.prototype.createBloom=function(e,i,n,r,o){new t.Bloom(new t.Vector(e,i),n,r,o,this)},e.prototype.clear=function(){this.blooms=[]},e.random=function(t,e){return Math.random()*(e-t)+t},e.randomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},e.toRadian=function(t){return e.circle*(t/360)},e.toAngle=function(t){return 360*(t/e.circle)},e.rgba=function(t,e,i,n){return"rgba("+t+","+e+","+i+","+n+")"},e.randomrgba=function(t,i,n,r,o,a,s){var h=Math.round(e.random(t,i)),c=Math.round(e.random(n,r)),d=Math.round(e.random(o,a)),u=5;return Math.abs(h-c)<=u&&Math.abs(c-d)<=u&&Math.abs(d-h)<=u?this.rgba(t,r,o,s):this.rgba(h,c,d,s)},e.getHeartPoint=function(t){var e=t/Math.PI,i=19.5*(16*Math.pow(Math.sin(e),3)),n=-20*(13*Math.cos(e)-5*Math.cos(2*e)-2*Math.cos(3*e)-Math.cos(4*e)),r=egret.MainContext.instance.stage.stageWidth>>1,o=egret.MainContext.instance.stage.stageHeight>>1,a=.7;return[r+a*i,o+a*n]},e}();e.options={createBloomSpeed:80,bloomCount:45,petalCount:{min:8,max:12},petalStretch:{min:2,max:3},growFactor:{min:.1,max:1},bloomRadius:{min:15,max:20},growSpeed:1e3/60,color:{rmin:128,rmax:255,gmin:0,gmax:128,bmin:0,bmax:128,opacity:.1}},e.circle=2*Math.PI,t.Garden=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(e){function i(n){void 0===n&&(n="WINDSPIRIT");var r=e.call(this)||this;r.tiles=[],r.index=0,r.time=0;var o=n.length;o>9&&(n="文字太长");for(var a=0;o>a;a++){var s=new t.Tile(n[a],i.colors[a%i.colors.length]);s.x=a*(s.width+i.gap)+(s.width>>1),r.addChild(s),r.tiles.push(s)}return r.anchorOffsetX=r.width>>1,r.delayLight(),r}return __extends(i,e),i.prototype.updateText=function(t){for(var e=this.tiles.length,i=0;i<t.length&&e>i;i++)this.tiles[i].label.text=t[i]},i.prototype.light=function(){var t=this.tiles[this.index];t.light(),this.unlightPre(),this.index++,this.index%=this.tiles.length,this.delayLight()},Object.defineProperty(i.prototype,"color",{get:function(){return i.colors[(this.index-1)%i.colors.length]},enumerable:!0,configurable:!0}),i.prototype.delayLight=function(){var t=200;this.time=egret.setTimeout(this.light,this,t)},i.prototype.unlightPre=function(){var t=this.index-2;0>t&&(t=this.tiles.length+t),this.tiles[t].unLight()},i.prototype.stop=function(){egret.clearTimeout(this.time)},i}(egret.DisplayObjectContainer);e.gap=8,e.colors=[16732236,9658111,6750064,9032703,16120186,16750398],t.LightLabel=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(e){function i(){var n=e.call(this)||this,r=new egret.Shape;r.graphics.beginFill(16777215,.5),n.width=.8*t.Util.stageW,n.height=n.width/8,r.graphics.drawRoundRect(0,0,n.width,n.height,n.height),r.anchorOffsetX=r.width>>1,r.anchorOffsetY=r.height>>1,n.addChild(r),r=new egret.Shape,r.graphics.beginFill(i.barColor),n.loadingBar=r;var o=10,a=20;r.graphics.drawRoundRect(0,0,n.width-a,n.height-o,n.height-(a>>1)),r.anchorOffsetX=r.width>>1,r.anchorOffsetY=r.height>>1,n.addChild(r);var s=new egret.Shape;s.graphics.lineStyle(3,16777215),s.graphics.beginFill(i.circleColor),s.graphics.drawCircle(0,0,n.height>>1),s.x=n.width-s.width>>1,n.addChild(s),n.circle=s;var h=new egret.TextField,c=t.Util.getQueryString("l");return c||(c=t.Config.txt),h.text=c,h.size=.57*n.height/h.text.length,h.textColor=0,h.anchorOffsetX=h.width>>1,h.anchorOffsetY=h.height>>1,h.x=n.width-s.width>>1,n.labelWind=h,n.addChild(h),egret.Tween.get(h,{loop:!0}).to({rotation:360},600),n}return __extends(i,e),i.prototype.setProgress=function(t){for(var e=this,n=0;8>n;n++)setTimeout(function(){var t=new egret.Shape;t.graphics.beginFill(i.barColor),t.rotation=90*Math.random(),t.anchorOffsetX=t.width>>1,t.anchorOffsetY=t.height>>1;var n=5*Math.random();t.graphics.drawCircle(0,0,n);var r=t.height>>1;r+=5;var o=e.height-r;t.y=r+Math.random()*(o-r)-(e.height>>1),t.x=e.width-e.circle.width>>1,egret.Tween.get(t).to({x:(-e.width>>1)+30},500).call(function(){e.removeChild(t)}),e.addChild(t)},500*Math.random());var r=new egret.Rectangle(0,0,t*this.loadingBar.width,this.loadingBar.height);this.loadingBar.mask=r,1==t&&(egret.Tween.removeTweens(this.labelWind),this.labelWind.rotation=0,egret.Tween.get(this.labelWind).to({scaleX:0,scaleY:0},500).call(function(){e.labelWind.text="100%",e.labelWind.anchorOffsetX=e.labelWind.width>>1,e.labelWind.anchorOffsetY=e.labelWind.height>>1,egret.Tween.get(e.labelWind).to({scaleX:.5,scaleY:.5},500).wait(1e3).call(function(){e.dispatchEventWith(egret.Event.COMPLETE)})}))},i}(egret.DisplayObjectContainer);e.barColor=16754688,e.circleColor=e.barColor-3e3,t.LoadingMC=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(t){function e(e,n){var r=t.call(this)||this;return r.frameRate=60,e instanceof i?(console.warn("MovieClip#constructor接口参数已经变更，请尽快调整用法为 new MovieClip(data,texture)"),r.delegate=e):r.delegate=new i(e,n),r.delegate.setMovieClip(r),r}return __extends(e,t),e.prototype.gotoAndPlay=function(t){this.delegate.gotoAndPlay(t)},e.prototype.gotoAndStop=function(t){this.delegate.gotoAndStop(t)},e.prototype.stop=function(){this.delegate.stop()},e.prototype.dispose=function(){this.delegate.dispose()},e.prototype.release=function(){console.warn("MovieClip#release方法即将废弃"),this.dispose()},e.prototype.getCurrentFrameIndex=function(){return console.warn("MovieClip#getCurrentFrameIndex方法即将废弃"),this.delegate._currentFrameIndex},e.prototype.getTotalFrame=function(){return console.warn("MovieClip#getTotalFrame方法即将废弃"),this.delegate._totalFrame},e.prototype.setInterval=function(t){console.warn("MovieClip#setInterval方法即将废弃,请使用MovieClip#frameRate代替"),this.frameRate=60/t},e.prototype.getIsPlaying=function(){return console.warn("MovieClip#getIsPlaying方法即将废弃"),this.delegate.isPlaying},e}(egret.DisplayObjectContainer);t.MovieClip=e;var i=function(){function t(t,e){this.data=t,this._totalFrame=0,this._passTime=0,this._currentFrameIndex=0,this._isPlaying=!1,this._frameData=t,this._spriteSheet=new egret.SpriteSheet(e)}return t.prototype.setMovieClip=function(t){this.movieClip=t,this.bitmap=new egret.Bitmap,this.movieClip.addChild(this.bitmap)},t.prototype.gotoAndPlay=function(t){this.checkHasFrame(t),this._isPlaying=!0,this._currentFrameIndex=0,this._currentFrameName=t,this._totalFrame=this._frameData.frames[t].totalFrame,this.playNextFrame(),this._passTime=0,egret.Ticker.getInstance().register(this.update,this)},t.prototype.gotoAndStop=function(t){this.checkHasFrame(t),this.stop(),this._passTime=0,this._currentFrameIndex=0,this._currentFrameName=t,this._totalFrame=this._frameData.frames[t].totalFrame,this.playNextFrame()},t.prototype.stop=function(){this._isPlaying=!1,egret.Ticker.getInstance().unregister(this.update,this)},t.prototype.dispose=function(){},t.prototype.checkHasFrame=function(t){void 0==this._frameData.frames[t]&&console.error("MovieClip没有对应的frame：",t)},t.prototype.update=function(t){for(var e=1e3/this.movieClip.frameRate,i=this._passTime%e,n=Math.floor((i+t)/e);n>=1;)1==n?this.playNextFrame():this.playNextFrame(!1),n--;this._passTime+=t},t.prototype.playNextFrame=function(t){void 0===t&&(t=!0);var e=this._frameData.frames[this._currentFrameName].childrenFrame[this._currentFrameIndex];if(t){var i=this.getTexture(e.res),n=this.bitmap;n.x=e.x,n.y=e.y,n.texture=i}null!=e.action&&this.movieClip.dispatchEventWith(e.action),this._currentFrameIndex++,this._currentFrameIndex==this._totalFrame&&(this._currentFrameIndex=0,e.action!=egret.Event.COMPLETE&&this.movieClip.dispatchEventWith(egret.Event.COMPLETE))},t.prototype.getTexture=function(t){var e=this._frameData.res[t],i=this._spriteSheet.getTexture(t);return i||(i=this._spriteSheet.createTexture(t,e.x,e.y,e.w,e.h)),i},t}()}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(t){function e(e,i){void 0===i&&(i=null);var n=t.call(this)||this;return n.isComplete=!1,RES.getResByUrl(e,function(t){n.texture=t,n.width=t.textureWidth,n.height=t.textureHeight,n.isComplete=!0,i&&i(n)},n,RES.ResourceItem.TYPE_IMAGE),n}return __extends(e,t),e}(egret.Bitmap);t.NetBitmap=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(){function e(t,e,i,n,r,o){this.stretchA=0,this.stretchB=0,this.startAngle=0,this.angle=0,this.radius=1,this.isFinished=!1,this.stretchA=t,this.stretchB=e,this.startAngle=i,this.angle=n,this.bloom=o,this.growFactor=r}return e.prototype.draw=function(){var e=this.bloom.garden.ctx,i=new t.Vector(0,this.radius).rotate(t.Garden.toRadian(this.startAngle)),n=i.clone().rotate(t.Garden.toRadian(this.angle)),r=i.clone().mult(this.stretchA),o=n.clone().mult(this.stretchB);e.strokeStyle=this.bloom.rgba,e.beginPath(),e.moveTo(i.x,i.y),e.bezierCurveTo(r.x,r.y,o.x,o.y,n.x,n.y),e.stroke()},e.prototype.render=function(){this.radius<=this.bloom.radius?(this.radius+=this.growFactor,this.draw()):this.isFinished=!0},e}();t.Petal=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(){function e(){}return e.playSound=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.playMuteSound(e),this.soundVo?this.soundVo.name==e?t.GameData.isMusicOn()&&this.soundVo.play(i,n):(this.soundVo.stop(),this.playNewSound(e,i,n)):this.playNewSound(e,i,n)},e.playMuteSound=function(t){if(!this.muteSoundPlayed){var e=RES.getRes(t);return null==e?void console.log("sound err"):(this.muteSoundPlayed=!0,"undefined"==typeof window.WeixinJSBridge?e.play(0,1).volume=0:void window.WeixinJSBridge.invoke("getNetworkType",{},function(t){return e.play(0,1).volume=0}))}},e.playNewSound=function(e,n,r){this.isValidAudio(e)&&(this.soundVo=new i(e),this.soundVo.play(n,r),t.GameData.isMusicOn()||this.soundVo.stop())},e.pauseSound=function(){this.soundVo&&this.soundVo.pause()},e.stopSound=function(e){void 0===e&&(e=!0),e&&t.GameData.closeMusic(),this.soundVo&&this.soundVo.stop()},e.resumeSound=function(e){void 0===e&&(e=!0),e&&t.GameData.openMusic(),t.GameData.isMusicOn()&&this.soundVo&&this.soundVo.resume()},e.playAudio=function(e,n,r){if(void 0===n&&(n=1),void 0===r&&(r=null),this.playMuteSound(e),t.GameData.isAudioOn())if(this.isValidAudio(e)){var o=new i(e);o.play(0,n),o.channel&&r&&o.channel.addEventListener(egret.Event.SOUND_COMPLETE,r,this)}else r&&r()},e.setMusicVolume=function(e){this.soundVo&&(this.soundVo.channel.volume=e),t.GameData.setMusicVolume(e)},e.isValidAudio=function(e){var i=RES.getRes(e);if(i){var n=egret.getQualifiedClassName(i);if(t.log(n),"egret.web.HtmlSound"==n||"egret.web.WebAudioSound"==n||"egret.web.QQSound"==n)return!0;var r=e+" is not a audio file";console.error(r),t.log(r)}else{var o=e+" audio not found";console.error(o),t.log(o)}return!1},e}();e.musicVolume=1,e.audioVolume=1,e.muteSoundPlayed=!1,t.SoundManager=e;var i=function(){function t(t){this.times=0,this.isPlaying=!1,this.position=0,this.name=t,e.isValidAudio(t)?this.sound=RES.getRes(t):this.sound=null}return t.prototype.stop=function(){this.isPlaying=!1,this.channel.stop(),this.position=0},t.prototype.play=function(t,i){this.isPlaying||(this.isPlaying=!0,this.times=i,this.position=t,this.channel=this.sound.play(t,i),this.channel.volume=e.musicVolume)},t.prototype.pause=function(){this.channel&&(this.isPlaying=!1,this.position=this.channel.position,this.channel.stop())},t.prototype.resume=function(){this.play(this.position,this.times)},t}()}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function r(t){e.call(n,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_TEXT)},t}();t.ThemeAdapter=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(t){function e(i,n){void 0===i&&(i="U"),void 0===n&&(n=16711680);var r=t.call(this)||this;return r.color=n,r.circle=new egret.Shape,r.addChild(r.circle),r.label=new egret.TextField,r.label.size=e.size+5,r.label.fontFamily="微软雅黑",r.label.text=i,r.label.anchorOffsetX=r.label.width>>1,r.label.anchorOffsetY=r.label.height>>1,r.unLight(),r.addChild(r.circle),r.addChild(r.label),r}return __extends(e,t),e.prototype.light=function(){this.circle.graphics.beginFill(this.color),this.drawCircle(),this.label.textColor=0},e.prototype.unLight=function(){this.scaleX=this.scaleY=1,this.circle.graphics.clear(),this.circle.graphics.lineStyle(2,this.color),this.drawCircle(),this.label.textColor=this.color},e.prototype.drawCircle=function(){this.circle.graphics.drawCircle(0,0,e.size)},e}(egret.DisplayObjectContainer);e.size=20,t.Tile=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(t){function e(e,i){var n=t.call(this)||this;n.bmp=new eui.Image,egret.ImageLoader.crossOrigin="",n.bmp.source=e,n.bmp.width=n.bmp.height=i,n.addChild(n.bmp);var r=new egret.Shape;r.graphics.beginFill(0);var o=i>>1;return r.graphics.drawCircle(o,o,o),n.addChild(r),n.bmp.mask=r,n}return __extends(e,t),e}(egret.Sprite);t.Avatar=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(){function t(){}return t}();t.ResConfig=e;var i=function(){function t(){}return t}();t.UserResConfig=i;var n=function(e){function i(n){var r=e.call(this)||this;r.uploadLayer=null,r.touchedCount=0,r.lastTouchTime=0,t.System.solution(),egret.ImageLoader.crossOrigin="goYoung",i.ins=r,t.Config.init(n);var o=document.getElementsByClassName("egret-player")[0],a=o.getAttribute("data-show-log");return("true"==a||t.Util.getQueryString("debug"))&&(t.Config.DEBUG=!0),t.System.onStageStateChange(),window.record&&(t.GameData.record=window.record),r.loadCommonResConfig(),r.gameLayer=new egret.DisplayObjectContainer,r.addChild(r.gameLayer),r.netLoadingLayer=new egret.DisplayObjectContainer,r.addChild(r.netLoadingLayer),r.alertLayer=new egret.DisplayObjectContainer,r.addChild(r.alertLayer),r.debugLayer=new egret.DisplayObjectContainer,r.addChild(r.debugLayer),r.debugLayer.visible=t.Config.DEBUG,r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r.switchDebug,r),r.addEventListener(egret.TouchEvent.TOUCH_END,r.switchDebug,r),r.debugLabel=new egret.TextField,r.debugLabel.y=20,r.debugLabel.textColor=0,r.debugLabel.size=20,r.debugLabel.width=t.Util.stageW,r.debugLayer.addChild(r.debugLabel),r.geometryLayer=new egret.DisplayObjectContainer,r.debugLayer.addChild(r.geometryLayer),t.GameAPI.bindApi(t.api.restartGame,r.restart.bind(r)),t.log("engineVersion:"+t.engineVersion),t.log("version:"+t.version),t.log("gameVersion:"+t.gameVersion),r}return __extends(i,e),i.prototype.loadCommonResConfig=function(){RES.getResByUrl(t.Config.templateDir+"resource/common.res.json?v="+t.gameVersion,this.onCommonResComplete,this,RES.ResourceItem.TYPE_JSON)},i.prototype.onCommonResComplete=function(e){e?this.commonConfig=e:t.alert("加载公共资源失败"),this.loadDefaultResConfig()},i.prototype.loadDefaultResConfig=function(){var e=t.Config.templateDir+"resource/default.res.json?v="+t.gameVersion;RES.getResByUrl(e,this.onConfigComplete,this,RES.ResourceItem.TYPE_JSON)},i.prototype.onConfigComplete=function(e){var i=this;if(t.log("模板资源配置文件加载完成"),e){if(this.commonConfig){e.resources=e.resources.concat(this.commonConfig.resources);for(var n in this.commonConfig.groups){var r=!1;for(var o in e.groups)this.commonConfig.groups[n].name==e.groups[o].name&&(e.groups[o].keys+=","+this.commonConfig.groups[n].keys,r=!0);r||e.groups.push(this.commonConfig.groups[n])}}var a=function(){RES.parseConfig(e,t.Config.templateDir+"resource/"),i.loadGroup(t.RES_GROUP_LOADING)};t.Config.userResConfigUrl?RES.getResByUrl(t.Config.userResConfigUrl,function(i){if(t.log("用户定制资源记录加载完成"),i)for(var n in i.resources)for(var r in e.resources)i.resources[n].name==e.resources[r].name&&(e.resources[r].url=i.resources[n].url);a()},this):a()}else t.alert("加载游戏资源失败")},i.prototype.switchDebug=function(e){if(e.type==egret.TouchEvent.TOUCH_BEGIN){this.touchBeginPoint=new egret.Point(e.stageX,e.stageY);var i=egret.getTimer(),n=i-this.lastTouchTime;n>1e3&&(this.touchedCount=0),this.lastTouchTime=i}else{var r=5,o=e.stageX-this.touchBeginPoint.x,a=e.stageY-this.touchBeginPoint.y;this.touchedCount%2==0?Math.abs(a)*r<o?this.touchedCount++:this.touchedCount=0:Math.abs(a)*r<o?this.touchedCount=1:Math.abs(o)*r<a?this.touchedCount++:this.touchedCount=0}if(5==this.touchedCount){t.Config.DEBUG=!t.Config.DEBUG,this.debugLayer.visible=t.Config.DEBUG;var s="调试模式已";s+=t.Config.DEBUG?"打开":"关闭",t.alert(s),this.touchedCount=0}},i.prototype.onThemeLoadComplete=function(){this.loadingView=new t.LoadingLayer(this,this.beforeCreateGameScene),this.gameLayer.addChild(this.loadingView),this.loadGroup(t.RES_GROUP_PRELOAD)},i.prototype.loadGroup=function(t){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(t)},i.prototype.onResourceLoadComplete=function(e){if(e.groupName==t.RES_GROUP_PRELOAD)this.removeGroupEvent();else if(e.groupName==t.RES_GROUP_LOADING){this.stage.registerImplementation("eui.IAssetAdapter",new t.AssetAdapter),this.stage.registerImplementation("eui.IThemeAdapter",new t.ThemeAdapter);var i=new eui.Theme(t.Config.templateDir+"resource/default.thm.json?v="+t.gameVersion,this.stage);i.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)}},i.prototype.removeGroupEvent=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this)},i.prototype.onResourceProgress=function(e){e.groupName==t.RES_GROUP_PRELOAD&&this.loadingView.setTruePercent(e.itemsLoaded/e.itemsTotal)},i.prototype.beforeCreateGameScene=function(){this.uploadLayer=new t.UploadLayer,this.uploadLayer.visible=!1,this.netLoadingLayer.addChild(this.uploadLayer),this.createGameScene()},i.prototype.createGameScene=function(){},i.prototype.restart=function(){},i}(egret.DisplayObjectContainer);t.App=n}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(e){function i(i){void 0===i&&(i=!0);var n=e.call(this)||this;return n.skinName="GameOverSkin",i&&t.Net.uploadScore(),n}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.labelScore&&(this.labelScore.text=t.GameData.score.toString()),this.updateRecord(),this.btnRank&&this.btnRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showRank,this),this.btnRetry&&this.btnRetry.addEventListener(egret.TouchEvent.TOUCH_TAP,this.doRetry,this)},i.prototype.updateRecord=function(){this.labelRecord&&(this.labelRecord.text=t.GameData.record.toString())},i.prototype.doRetry=function(e){e&&e.stopImmediatePropagation(),this.btnRetry&&(this.btnRetry.touchEnabled=!1),t.App.ins.restart(),t.GameAPI.gameRestart(),t.Util.safeRemove(this)},i.prototype.showRank=function(){t.GameAPI.gameRankOpen()},i}(eui.Component);t.GameOverLayer=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(e){function i(i,n){var r=e.call(this)||this;return r.EVENT_ALL_COMPLETE="EVENT_ALL_COMPLETE",r.aniComplete=!1,r.isCreated=!1,r.loadingWidth=0,r.vPercent=0,r.totalTime=5e3,r.curTime=0,r.truePercent=0,r.skinName="LoadingSkin",r.width=t.Util.stageW,r.height=t.Util.stageH,r.addEventListener(egret.Event.COMPLETE,r.onComplete,r),n&&(r.completeFunc=n,r.addEventListener(r.EVENT_ALL_COMPLETE,r.completeFunc,i)),r}return __extends(i,e),i.prototype.childrenCreated=function(){var i=this;if(e.prototype.childrenCreated.call(this),t.Config.heart){var n=document.getElementsByTagName("canvas")[0],r=n.getContext("2d");this.garden=new t.Garden(r,n)}this.logos&&(this.logos.visible=t.Config.showLogo),this.isCreated=!0,this.loadingWidth=this.loadings.width;var o=t.Util.getQueryString("txt");o||(o="iiiiy.com");var a=new t.LightLabel(o);a.x=t.Util.centerX,a.y=t.Util.centerY,this.light=a,this.addChild(a);var s=new t.LoadingMC;s.y=a.y+250+(a.height+(s.height>>1)),s.x=t.Util.centerX,this.loadingMc=s,this.loadingMc.addEventListener(egret.Event.COMPLETE,function(){console.log("loading mc end"),i.aniComplete=!0,i.dispatchEventWith(egret.Event.COMPLETE)},this),this.addChild(s),this.updateProgress(),egret.Ticker.getInstance().register(this.update,this)},i.prototype.update=function(t){this.curTime+=t,this.vPercent=this.curTime/this.totalTime,this.setVirtualPercent(this.vPercent)},i.prototype.setVirtualPercent=function(t){this.vPercent=t,this.updateProgress()},i.prototype.setTruePercent=function(t){this.truePercent=t,this.updateProgress()},i.prototype.updateProgress=function(){var t=Math.min(this.truePercent,this.vPercent);if(this.isCreated){if(this.loadingMc.setProgress(t),this.loadings){var e=20;this.loadings.width=e+t*(this.loadingWidth-e)}1==t&&egret.Ticker.getInstance().unregister(this.update,this)}},i.prototype.onComplete=function(){this.aniComplete&&(this.light.stop(),t.Config.heart&&this.garden.stop(),this.removeEventListener(egret.Event.COMPLETE,this.onComplete,this),t.GameAPI.gameResLoaded(),this.dispatchEventWith(this.EVENT_ALL_COMPLETE),t.Util.safeRemove(this))},i}(eui.Component);t.LoadingLayer=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="StartSkin",i.width=t.Util.stageW,i.height=t.Util.stageH,i.btnStart.addEventListener(egret.TouchEvent.TOUCH_TAP,i.start,i),t.GameAPI.bindApi(t.api.startGame,i.start.bind(i)),i}return __extends(i,e),i.prototype.start=function(){t.GameAPI.gameStart(),this.dispatchEventWith(t.EVENT_START_GAME),t.Util.safeRemove(this)},i}(eui.Component);t.StartLayer=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="UploadSkin",i.btnClose.visible=!1,i.width=t.Util.stageW,i.height=t.Util.stageH,i.showLoading(),t.Util.rotate(i.loading),i.btnRetry.addEventListener(egret.TouchEvent.TOUCH_TAP,i.retry,i),i.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,i.close,i),i}return __extends(i,e),i.prototype.close=function(){this.visible=!1},i.prototype.retry=function(){t.Net.retry(),this.btnRetry.touchEnabled=!1},i.prototype.showError=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),this.btnRetry.touchEnabled=!0,this.loading.visible=!1,this.mainLayer.visible=!0,t&&(this.tipLabel.text=t),e&&(this.title.text=e),i&&(this.labelBtn.text=i)},i.prototype.showLoading=function(){this.loading.visible=!0,this.mainLayer.visible=!1},i}(eui.Component);t.UploadLayer=e}(windspirit||(windspirit={}));var windspirit;!function(t){function e(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];d.DEBUG&&(console.log.apply(console,[e].concat(i)),t.App.ins&&(t.App.ins.debugLabel.appendText(e+"\n"),t.App.ins.debugLabel.height>t.Util.stageH&&e&&(t.App.ins.debugLabel.text=t.App.ins.debugLabel.text.slice(e.length))))}function i(e){if(t.App.ins&&t.App.ins.alertLayer){egret.Tween.removeTweens(t.App.ins.alertLayer),t.App.ins.alertLayer.removeChildren();var i=.8*t.Util.stageW,n=new egret.Sprite,r=new egret.TextField;r.bold=!0,r.size=25,r.text=e,r.lineSpacing=r.size>>1,r.width=Math.min(r.width,i),t.Util.setCenterAnchor(r),n.graphics.beginFill(0,.8),n.graphics.drawRoundRect(0,0,r.width+50,r.height+30,30),r.x=n.width>>1,r.y=n.height>>1,n.addChild(r),t.Util.setCenterAnchor(n),t.App.ins.alertLayer.addChild(n),n.alpha=0,n.x=t.Util.centerX,n.y=t.Util.centerY,egret.Tween.get(n).to({alpha:1},1e3).wait(1e3).to({alpha:0},1e3).call(function(){t.Util.safeRemove(n)},this)}}function n(e,i,n){if(void 0===i&&(i=16711680),void 0===n&&(n=3),d.DEBUG&&t.App.ins.geometryLayer&&e){var r=new egret.Shape;r.graphics.beginFill(i),r.graphics.drawCircle(0,0,n),r.x=e.x,r.y=e.y,t.App.ins.geometryLayer.addChild(r)}}function r(e,i,n,r){if(void 0===n&&(n=16711680),void 0===r&&(r=3),d.DEBUG&&t.App.ins.geometryLayer){var o=new egret.Shape;o.graphics.lineStyle(r,n),o.graphics.moveTo(e.x,e.y),o.graphics.lineTo(i.x,i.y),t.App.ins.geometryLayer.addChild(o)}}function o(t){var e;e=t.parent?t.parent.localToGlobal(t.x,t.y):new egret.Point(t.x,t.y),n(e)}function a(){t.App.ins.geometryLayer&&t.App.ins.geometryLayer.removeChildren()}function s(){t.App.ins.uploadLayer&&(t.App.ins.uploadLayer.visible=!0,t.App.ins.uploadLayer.showLoading())}function h(e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),t.App.ins.uploadLayer&&(t.App.ins.uploadLayer.visible=!0,t.App.ins.uploadLayer.showError(e,i,n))}function c(){t.App.ins.uploadLayer&&(t.App.ins.uploadLayer.visible=!1)}var d=function(){function e(){}return e.init=function(i){this.DEBUG=i.debug,this.heart=i.heart,this.showLogo=i.showLogo,this.txt=i.txt||"永",this.gameId=window.gameId||i.appId,this.openId=window.openid||"",this.fOpenid=window.fOpenid||"",t.GameData.storeKey=e.gameId+"-"+e.openId+"-gameData",egret.localStorage.getItem(t.GameData.storeKey)?t.GameData.initData():t.GameData.saveData()},e}();d.gameId="",d.openId="",d.DEBUG=!1,d.fOpenid="",d.showLogo=!0,d.heart=!0,d.txt="",d.userResConfigUrl="",d.templateDir="",t.Config=d,t.log=e,t.alert=i,t.drawPoint=n,t.drawLine=r,t.drawObjectPoint=o,t.clearGeometry=a,t.showNetLoading=s,t.showNetRetry=h,t.hideNetLoading=c}(windspirit||(windspirit={}));var windspirit;!function(t){t.EVENT_START_GAME="event_start_game",t.RES_GROUP_LOADING="loading",t.RES_GROUP_PRELOAD="preload",t.EVENT_TIME_END="ws_event_time_end",t.FONT_FAMILY="微软雅黑",t.version="20210815001",t.engineVersion="4.0.3",t.gameVersion="1.0",t.avatar="http://q.qlogo.cn/qqapp/1700002142/D696824889D4F7C363E28BB6E4024A22/100",t.nick="goYoung"}(windspirit||(windspirit={}));var windspirit;!function(t){t.api={gameResLoaded:"gameResLoaded",gameRankOpen:"gameRankOpen",gameStart:"gameStart",gameOver:"gameOver",gameRestart:"gameRestart",gamePause:"gamePause",gameResume:"gameResume",followUs:"followUs",startGame:"startGame",restartGame:"restartGame",pauseGame:"pauseGame",resumeGame:"resumeGame",registerGame:"registerGame"};var e=function(){function t(){this.state=1}return t}();t.GameOverParam=e;var i=function(){function i(){}return i.gameResLoaded=function(){this.runApi(t.api.gameResLoaded)},i.gameRankOpen=function(){this.runApi(t.api.gameRankOpen)},i.gameRestart=function(){this.runApi(t.api.gameRestart)},i.followUs=function(){this.runApi(t.api.followUs)},i.gameOver=function(i){void 0===i&&(i=new e),this.runApi(t.api.gameOver,i)},i.gameStart=function(){this.runApi(t.api.gameStart)},i.runApi=function(e,i){void 0===i&&(i=null),e?(window[e]&&window[e](i),t.log("gameApi:"+e)):console.error(this.textApiError)},i.bindApi=function(e,i){e?(t.log("bindApi:"+e),i&&(window[e]=i)):console.error(this.textApiError)},i}();i.textApiError="apiName不能为空",t.GameAPI=i}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(){function t(){this.level=1,this.music={state:!0,volume:1},this.audio={state:!0,volume:1},this.isNewer=!0}return t}();t.LocalData=e;var i=function(){function e(){}return e.isMusicOn=function(){return this.localData.music.state},e.closeMusic=function(){this.localData.music.state=!1,this.saveData()},e.openMusic=function(){this.localData.music.state=!0,this.saveData()},e.isAudioOn=function(){return this.localData.audio.state
},e.closeAudio=function(){this.localData.audio.state=!1,this.saveData()},e.openAudio=function(){this.localData.audio.state=!0,this.saveData()},e.setAward=function(e){if(0!=e){var i=this.getAward(e);i?this.curAward=i:(this.curAward.lot_id=0,t.alert("未找到奖项"))}else this.curAward.lot_id=0},e.getAward=function(t){for(var e in this.awardList)if(t==this.awardList[e].lot_id)return this.awardList[e];return null},Object.defineProperty(e,"level",{get:function(){return this.localData.level},set:function(t){this.localData.level=t,this.saveData()},enumerable:!0,configurable:!0}),e.upLevel=function(){this.level++},Object.defineProperty(e,"isNewer",{get:function(){return this.localData.isNewer},enumerable:!0,configurable:!0}),e.setNewer=function(){this.localData.isNewer=!0,this.saveData()},e.passNewer=function(){this.localData.isNewer=!1,this.saveData()},e.setMusicVolume=function(t){this.localData.music.volume=t,this.saveData()},e.setAudioVolume=function(t){this.localData.audio.volume=t,this.saveData()},e.initData=function(){this.localData=JSON.parse(egret.localStorage.getItem(this.storeKey)),this.updateData()},e.saveData=function(){egret.localStorage.setItem(this.storeKey,JSON.stringify(this.localData)),this.updateData()},e.updateData=function(){window.game_data=this.localData,window.score=this.score,window.record=this.record},e.setItem=function(t,e){this.localData[t]=e,this.saveData()},e.getItem=function(t){return this.localData[t]},e}();i.storeKey="data",i.score=0,i.record=0,i.localData=new e,i.awardList=[],i.curAward=new t.Award,i.game_times=0,i.awardTimes=0,t.GameData=i}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(){function e(){}return e.uploadScore=function(e,i){void 0===e&&(e=t.GameData.score),void 0===i&&(i=null);var n={gameId:t.Config.gameId,openid:t.Config.openId,score:e,fOpenid:t.Config.fOpenid},r=function(e){if(e.type!=egret.IOErrorEvent.IO_ERROR){var n=e.target,r=JSON.parse(n.data);if(0==r.success){var o=r.record;o&&(t.GameData.record=o),t.GameAPI.gameOver()}else t.showNetRetry("服务器错误")}i&&i(e)};this.doHttpGet(this.urlUploadScore,n,r)},e.doHttpGet=function(i,n,r){var o=this;e.lastTime=egret.getTimer(),t.hideNetLoading(),e.retry=e.doHttpGet.bind(e,i,n,r);var a=egret.setTimeout(function(){t.showNetLoading()},this,100),s=this.encode_url(i,n);s+="&v="+t.version;var h=new egret.URLLoader,c=new egret.URLRequest;c.url=s,c.method=egret.URLRequestMethod.GET,h.load(c);var d=function(i){var h=egret.getTimer();h-e.lastTime;if(e.lastTime=h,t.Config.DEBUG){console.group("http请求"),console.group("请求数据"),t.log(JSON.stringify(n)),console.groupEnd(),console.group("url"),t.log(s),console.groupEnd(),console.group("返回数据");var c=i.target,d=c.data;t.log(d),console.groupEnd(),console.groupEnd()}i.type==egret.IOErrorEvent.IO_ERROR?egret.setTimeout(function(){egret.clearTimeout(a),t.showNetRetry()},o,e.timeOut):(egret.clearTimeout(a),t.hideNetLoading()),r&&r(i)};h.addEventListener(egret.Event.COMPLETE,d,this),h.addEventListener(egret.IOErrorEvent.IO_ERROR,d,this)},e.httpGet=function(e,i){var n=this,r=new egret.URLLoader,o=new egret.URLRequest;o.url=e,o.method=egret.URLRequestMethod.GET,r.load(o);var a=function(r){if(r.type!=egret.IOErrorEvent.IO_ERROR){var o=r.target,a=o.data;t.Config.DEBUG&&(console.group("http返回"),console.group("url"),t.log(e),console.groupEnd(),console.group("返回数据"),t.log(a),console.groupEnd(),console.groupEnd())}else t.alert(n.text_net_error);i&&i(r)};r.addEventListener(egret.Event.COMPLETE,a,this),r.addEventListener(egret.IOErrorEvent.IO_ERROR,a,this)},e.encode_url=function(e,i){var n=t.BASE64.encoder(JSON.stringify(i)),r=(new md5).hex_md5(n+this.sign_key);return n=encodeURIComponent(n),e+="?data="+n+"&sign="+r},e.get_lot_list=function(e){void 0===e&&(e=null);var i={gameid:t.Config.gameId},n=this.encode_url(this.host+"player/awardList",i),r=function(i){if(i.type!=egret.IOErrorEvent.IO_ERROR){var n=i.target,r=n.data,o=JSON.parse(r);1==o.status&&(t.GameData.awardList=o.lotlist)}e&&e(i)};this.httpGet(n,r)},e.get_award=function(e){void 0===e&&(e=null);var i={gameid:t.Config.gameId,openid:t.Config.openId,uid:t.friend.uid},n=this.encode_url(this.host+"player/awardGet",i),r=function(i){if(i.type!=egret.IOErrorEvent.IO_ERROR){var n=i.target,r=n.data,o=JSON.parse(r);if(1==o.status){var a=parseInt(o.lot_id);if(t.GameData.setAward(a),o.times){var s=parseInt(o.times);t.GameData.awardTimes=s}}}e&&e(i)};this.httpGet(n,r)},e.get_award_times=function(e){void 0===e&&(e=null);var i={gameid:t.Config.gameId,openid:t.Config.openId},n=this.encode_url(this.host+"player/awardTimes",i),r=function(i){if(i.type!=egret.IOErrorEvent.IO_ERROR){var n=i.target,r=n.data,o=JSON.parse(r);1==o.status&&(t.GameData.awardTimes=parseInt(o.times))}e&&e(i)};this.httpGet(n,r)},e}();e.sign_key="01FD43D2A54FCE60",e.host="http://h5.windspirit.cn/",e.urlUploadScore=e.host+"upload/record_safe.php",e.url_game_time=e.host+"Game/gettime",e.url_get_record=e.host+"Game/getMyRecord",e.url_get_rank=e.host+"Game/getMyRank",e.url_game_times=e.host+"Game/getLeftTimes",e.url_use_times=e.host+"Game/costGameTimes",e.url_get_percent=e.host+"Game/getPercent",e.text_net_error="网和络闹别扭，关键时刻掉链子连不上!",e.lastTime=0,e.totalTimeOut=300,e.timeOut=0,t.Net=e,t.logo=e.host+"Public/images/home/logo.png"}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(){function e(){}return e.solution=function(){egret.MainContext.instance.stage.scaleMode=egret.StageScaleMode.EXACT_FIT},e.onStageStateChange=function(){egret.MainContext.instance.stage.addEventListener(egret.Event.DEACTIVATE,function(){t.log("game deactivate"),t.SoundManager.pauseSound()},this),egret.MainContext.instance.stage.addEventListener(egret.Event.ACTIVATE,function(){t.log("game activate"),t.SoundManager.resumeSound(!1)},this)},e}();t.System=e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(){function t(){this.avatar="",this.nick="",this.uid=""}return t}();t.User=e,t.user=new e,t.friend=new e}(windspirit||(windspirit={}));var windspirit;!function(t){var e=function(){function t(){}return t._toBinary=function(t){for(var e=new Array;t>0;){var i=t%2;t=Math.floor(t/2),e.push(i)}return e.reverse(),e},t._toDecimal=function(t){for(var e=0,i=0,n=t.length-1;n>=0;--n){var r=t[n];1==r&&(e+=Math.pow(2,i)),++i}return e},t._toUTF8Binary=function(t,e){for(var i=8-(t+1)+6*(t-1),n=e.length,r=i-n;--r>=0;)e.unshift(0);for(var o=[],a=t;--a>=0;)o.push(1);o.push(0);for(var s=0,h=8-(t+1);h>s;++s)o.push(e[s]);for(var c=0;t-1>c;++c){o.push(1),o.push(0);for(var d=6;--d>=0;)o.push(e[s++])}return o},t.encoder=function(t){for(var e=[],i=[],n=0,r=t.length;r>n;++n){var o=t.charCodeAt(n),a=this._toBinary(o);if(128>o){for(var s=8-a.length;--s>=0;)a.unshift(0);i=i.concat(a)}else o>=128&&2047>=o?i=i.concat(this._toUTF8Binary(2,a)):o>=2048&&65535>=o?i=i.concat(this._toUTF8Binary(3,a)):o>=65536&&2097151>=o?i=i.concat(this._toUTF8Binary(4,a)):o>=2097152&&67108863>=o?i=i.concat(this._toUTF8Binary(5,a)):o>=4e6&&2147483647>=o&&(i=i.concat(this._toUTF8Binary(6,a)))}for(var h=0,n=0,r=i.length;r>n;n+=6){var c=n+6-r;2==c?h=2:4==c&&(h=4);for(var d=h;--d>=0;)i.push(0);e.push(this._toDecimal(i.slice(n,n+6)))}for(var u="",n=0,r=e.length;r>n;++n)u+=this.BASE64_MAPPING[e[n]];for(var n=0,r=h/2;r>n;++n)u+="=";return u},t.decoder=function(t){var e=t.length,i=0;"="==t.charAt(e-1)&&("="==t.charAt(e-2)?(i=4,t=t.substring(0,e-2)):(i=2,t=t.substring(0,e-1)));for(var n=[],r=0,o=t.length;o>r;++r)for(var a=t.charAt(r),s=0,h=this.BASE64_MAPPING.length;h>s;++s)if(a==this.BASE64_MAPPING[s]){var c=this._toBinary(s),d=c.length;if(6-d>0)for(var u=6-d;u>0;--u)c.unshift(0);n=n.concat(c);break}i>0&&(n=n.slice(0,n.length-i));for(var l=[],g=[],r=0,o=n.length;o>r;)if(0==n[r])l=l.concat(this._toDecimal(n.slice(r,r+8))),r+=8;else{for(var p=0;o>r&&1==n[r];)++p,++r;for(g=g.concat(n.slice(r+1,r+8-p)),r+=8-p;p>1;)g=g.concat(n.slice(r+2,r+8)),r+=8,--p;l=l.concat(this._toDecimal(g)),g=[]}return l},t}();e.BASE64_MAPPING=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],t.BASE64=e}(windspirit||(windspirit={}));var md5=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),i)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var i=this.rstr2binl(t);i.length>16&&(i=this.binl_md5(i,8*t.length));for(var n=Array(16),r=Array(16),o=0;16>o;o++)n[o]=909522486^i[o],r[o]=1549556828^i[o];var a=this.binl_md5(n.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(r.concat(a),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var i,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",r="",o=0;o<t.length;o++)i=t.charCodeAt(o),r+=n.charAt(i>>>4&15)+n.charAt(15&i);return r},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",r=t.length,o=0;r>o;o+=3)for(var a=t.charCodeAt(o)<<16|(r>o+1?t.charCodeAt(o+1)<<8:0)|(r>o+2?t.charCodeAt(o+2):0),s=0;4>s;s++)n+=8*o+6*s>8*t.length?this.b64pad:i.charAt(a>>>6*(3-s)&63);return n},t.prototype.rstr2any=function(t,e){var i,n,r,o,a,s=e.length,h=Array(Math.ceil(t.length/2));for(i=0;i<h.length;i++)h[i]=t.charCodeAt(2*i)<<8|t.charCodeAt(2*i+1);var c=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),d=Array(c);for(n=0;c>n;n++){for(a=Array(),o=0,i=0;i<h.length;i++)o=(o<<16)+h[i],r=Math.floor(o/s),o-=r*s,(a.length>0||r>0)&&(a[a.length]=r);d[n]=o,h=a}var u="";for(i=d.length-1;i>=0;i--)u+=e.charAt(d[i]);return u},t.prototype.str2rstr_utf8=function(t){for(var e,i,n="",r=-1;++r<t.length;)e=t.charCodeAt(r),i=r+1<t.length?t.charCodeAt(r+1):0,e>=55296&&56319>=e&&i>=56320&&57343>=i&&(e=65536+((1023&e)<<10)+(1023&i),r++),127>=e?n+=String.fromCharCode(e):2047>=e?n+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n},t.prototype.str2rstr_utf16le=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i),t.charCodeAt(i)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t.charCodeAt(i)>>>8&255,255&t.charCodeAt(i));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(var i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e},t.prototype.binl2rstr=function(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i=1732584193,n=-271733879,r=-1732584194,o=271733878,a=0;a<t.length;a+=16){var s=i,h=n,c=r,d=o;i=this.md5_ff(i,n,r,o,t[a+0],7,-680876936),o=this.md5_ff(o,i,n,r,t[a+1],12,-389564586),r=this.md5_ff(r,o,i,n,t[a+2],17,606105819),n=this.md5_ff(n,r,o,i,t[a+3],22,-1044525330),i=this.md5_ff(i,n,r,o,t[a+4],7,-176418897),o=this.md5_ff(o,i,n,r,t[a+5],12,1200080426),r=this.md5_ff(r,o,i,n,t[a+6],17,-1473231341),n=this.md5_ff(n,r,o,i,t[a+7],22,-45705983),i=this.md5_ff(i,n,r,o,t[a+8],7,1770035416),o=this.md5_ff(o,i,n,r,t[a+9],12,-1958414417),r=this.md5_ff(r,o,i,n,t[a+10],17,-42063),n=this.md5_ff(n,r,o,i,t[a+11],22,-1990404162),i=this.md5_ff(i,n,r,o,t[a+12],7,1804603682),o=this.md5_ff(o,i,n,r,t[a+13],12,-40341101),r=this.md5_ff(r,o,i,n,t[a+14],17,-1502002290),n=this.md5_ff(n,r,o,i,t[a+15],22,1236535329),i=this.md5_gg(i,n,r,o,t[a+1],5,-165796510),o=this.md5_gg(o,i,n,r,t[a+6],9,-1069501632),r=this.md5_gg(r,o,i,n,t[a+11],14,643717713),n=this.md5_gg(n,r,o,i,t[a+0],20,-373897302),i=this.md5_gg(i,n,r,o,t[a+5],5,-701558691),o=this.md5_gg(o,i,n,r,t[a+10],9,38016083),r=this.md5_gg(r,o,i,n,t[a+15],14,-660478335),n=this.md5_gg(n,r,o,i,t[a+4],20,-405537848),i=this.md5_gg(i,n,r,o,t[a+9],5,568446438),o=this.md5_gg(o,i,n,r,t[a+14],9,-1019803690),r=this.md5_gg(r,o,i,n,t[a+3],14,-187363961),n=this.md5_gg(n,r,o,i,t[a+8],20,1163531501),i=this.md5_gg(i,n,r,o,t[a+13],5,-1444681467),o=this.md5_gg(o,i,n,r,t[a+2],9,-51403784),r=this.md5_gg(r,o,i,n,t[a+7],14,1735328473),n=this.md5_gg(n,r,o,i,t[a+12],20,-1926607734),i=this.md5_hh(i,n,r,o,t[a+5],4,-378558),o=this.md5_hh(o,i,n,r,t[a+8],11,-2022574463),r=this.md5_hh(r,o,i,n,t[a+11],16,1839030562),n=this.md5_hh(n,r,o,i,t[a+14],23,-35309556),i=this.md5_hh(i,n,r,o,t[a+1],4,-1530992060),o=this.md5_hh(o,i,n,r,t[a+4],11,1272893353),r=this.md5_hh(r,o,i,n,t[a+7],16,-155497632),n=this.md5_hh(n,r,o,i,t[a+10],23,-1094730640),i=this.md5_hh(i,n,r,o,t[a+13],4,681279174),o=this.md5_hh(o,i,n,r,t[a+0],11,-358537222),r=this.md5_hh(r,o,i,n,t[a+3],16,-722521979),n=this.md5_hh(n,r,o,i,t[a+6],23,76029189),i=this.md5_hh(i,n,r,o,t[a+9],4,-640364487),o=this.md5_hh(o,i,n,r,t[a+12],11,-421815835),r=this.md5_hh(r,o,i,n,t[a+15],16,530742520),n=this.md5_hh(n,r,o,i,t[a+2],23,-995338651),i=this.md5_ii(i,n,r,o,t[a+0],6,-198630844),o=this.md5_ii(o,i,n,r,t[a+7],10,1126891415),r=this.md5_ii(r,o,i,n,t[a+14],15,-1416354905),n=this.md5_ii(n,r,o,i,t[a+5],21,-57434055),i=this.md5_ii(i,n,r,o,t[a+12],6,1700485571),o=this.md5_ii(o,i,n,r,t[a+3],10,-1894986606),r=this.md5_ii(r,o,i,n,t[a+10],15,-1051523),n=this.md5_ii(n,r,o,i,t[a+1],21,-2054922799),i=this.md5_ii(i,n,r,o,t[a+8],6,1873313359),o=this.md5_ii(o,i,n,r,t[a+15],10,-30611744),r=this.md5_ii(r,o,i,n,t[a+6],15,-1560198380),n=this.md5_ii(n,r,o,i,t[a+13],21,1309151649),i=this.md5_ii(i,n,r,o,t[a+4],6,-145523070),o=this.md5_ii(o,i,n,r,t[a+11],10,-1120210379),r=this.md5_ii(r,o,i,n,t[a+2],15,718787259),n=this.md5_ii(n,r,o,i,t[a+9],21,-343485551),i=this.safe_add(i,s),n=this.safe_add(n,h),r=this.safe_add(r,c),o=this.safe_add(o,d)}return[i,n,r,o]},t.prototype.md5_cmn=function(t,e,i,n,r,o){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(n,o)),r),i)},t.prototype.md5_ff=function(t,e,i,n,r,o,a){return this.md5_cmn(e&i|~e&n,t,e,r,o,a)},t.prototype.md5_gg=function(t,e,i,n,r,o,a){return this.md5_cmn(e&n|i&~n,t,e,r,o,a)},t.prototype.md5_hh=function(t,e,i,n,r,o,a){return this.md5_cmn(e^i^n,t,e,r,o,a)},t.prototype.md5_ii=function(t,e,i,n,r,o,a){return this.md5_cmn(i^(e|~n),t,e,r,o,a)},t.prototype.safe_add=function(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}(),SystemType;!function(t){t[t.WINDOWS=0]="WINDOWS",t[t.IPHONE=1]="IPHONE",t[t.ANDROID=2]="ANDROID",t[t.IPAD=3]="IPAD",t[t.LINUX=4]="LINUX",t[t.MAC=5]="MAC",t[t.UC_BROWSER=6]="UC_BROWSER",t[t.UNKNOWN=7]="UNKNOWN"}(SystemType||(SystemType={}));var windspirit;!function(t){var e=function(){function e(){}return Object.defineProperty(e,"stageW",{get:function(){return egret.MainContext.instance.stage.stageWidth},enumerable:!0,configurable:!0}),e.getQueryString=function(t){var e,i=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(i);if(null!=n)try{e=decodeURIComponent(decodeURIComponent(n[2]))}catch(r){try{e=decodeURIComponent(n[2])}catch(r){e=n[2]}}return e},e.rotate=function(t,e){void 0===e&&(e=1e3),egret.Tween.get(t,{loop:!0}).to({rotation:360},e)},e.isMobile=function(){return egret.MainContext.deviceType==egret.MainContext.DEVICE_MOBILE},e.setScale=function(t,e){void 0===e&&(e=1),t.scaleX=t.scaleY=e},e.setCenter=function(t){this.setCenterAnchor(t),t.x=this.centerX,t.y=this.centerY},e.zfill=function(t,e){var i=(""+t).length;return Array(e>i?e-i+1||0:0).join("0")+t},Object.defineProperty(e,"stageH",{get:function(){return egret.MainContext.instance.stage.stageHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e,"centerX",{get:function(){return this.stageW>>1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"centerY",{get:function(){return this.stageH>>1},enumerable:!0,configurable:!0}),e.getCenteredImage=function(e){var i=new t.Bitmap(e);return i.anchorOffsetX=i.width>>1,i.anchorOffsetY=i.height>>1,i},e.getCenteredImageWithProxy=function(t){var e=new egret.DisplayObjectContainer;return e.addChild(this.getCenteredImage(t)),e},Object.defineProperty(e,"clientW",{get:function(){return document.documentElement.clientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clientH",{get:function(){return document.documentElement.clientHeight},enumerable:!0,configurable:!0}),e.printInfo=function(){var t="background:#e44c25;color:#000000;border-right:100px solid #fc6;border-left:10px solid #000;";console.log("%cwww.windspirit.cn",t),egret.Capabilities.runtimeType==egret.MainContext.RUNTIME_HTML5&&console.log("%c"+window.location.href,t),console.log("%c egret engine",t)},e.create_mcf=function(t,e){return new egret.MovieClipDataFactory(RES.getRes(t),RES.getRes(e))},e.create_mcdata=function(t,e,i){return this.create_mcf(t,e).generateMovieClipData(i)},e.isWeiXinBrowser=function(){if(egret.Capabilities.runtimeType==egret.MainContext.RUNTIME_HTML5){var t=""+window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i);return"micromessenger"==t?!0:!1}return!1},e.getOs=function(){if(egret.Capabilities.runtimeType==egret.MainContext.RUNTIME_HTML5){var t=window.navigator.userAgent.toLowerCase();return"windows nt"==""+t.match(/windows nt/i)?SystemType.WINDOWS:"iphone"==""+t.match(/iphone/i)?SystemType.IPHONE:"android"==""+t.match(/android/i)?SystemType.ANDROID:"ipad"==""+t.match(/ipad/i)?SystemType.IPAD:"linux"==""+t.match(/linux/i)?SystemType.LINUX:"mac"==""+t.match(/mac/i)?SystemType.MAC:"ucbrower"==""+t.match(/ucbrower/i)?SystemType.UC_BROWSER:SystemType.UNKNOWN}},e.createBitmapByName=function(t){var e=new egret.Bitmap(RES.getRes(t));return e},e.newBM=function(t,e,i,n,r,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=.5),void 0===r&&(r=.5),void 0===o&&(o=null);var a=new egret.Bitmap;return a.texture=RES.getRes(t),a.anchorOffsetX=n*a.width,a.anchorOffsetY=r*a.height,a.x=e,a.y=i,o&&(a.name=o),a},e.newMC=function(t,e,i,n,r,o,a,s){void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=.5),void 0===a&&(a=.5),void 0===s&&(s=0);var h=new egret.MovieClip(this.create_mcdata(e,i,t));return h.anchorOffsetX=o*h.width,h.anchorOffsetY=a*h.height,h.x=n,h.y=r,s&&(h.frameRate=s),h},e.createMc=function(t,e,i){var n=new egret.MovieClipDataFactory(RES.getRes(t),RES.getRes(e)),r=new egret.MovieClip(n.generateMovieClipData(i));return r},e.newLine=function(t,e,i,n,r,o){var a=new egret.Shape;return a.graphics.lineStyle(o,r),a.graphics.moveTo(t,e),a.graphics.lineTo(i,n),a},e.newRoundRect=function(t,e,i,n,r,o,a,s,h,c){var d=new egret.Sprite;return d.graphics.lineStyle(a,s),d.graphics.beginFill(h,c),d.graphics.drawRoundRect(t,e,i,n,r,o),d.graphics.endFill(),d.x=t,d.y=e,d.width=i,d.height=n,d},e.newRect=function(t,e,i,n,r,o,a,s){var h=new egret.Sprite;return h.graphics.lineStyle(a,s),h.graphics.beginFill(r,o),h.graphics.drawRect(t,e,i,n),h.graphics.endFill(),h.width=i,h.height=n,h},e.newCircle=function(t,e,i,n,r,o,a){var s=new egret.Sprite;return s.graphics.lineStyle(o,a),s.graphics.beginFill(n,r),s.graphics.drawCircle(0,0,i),s.graphics.endFill(),s.x=t,s.y=e,s},e.newTF=function(e,i,n,r,o,a,s,h){void 0===a&&(a=!1),void 0===s&&(s=null),void 0===h&&(h=null);var c=new egret.TextField;return c.text=e,c.x=i,c.y=n,c.size=r,c.textColor=o,s&&(c.stroke=s,c.strokeColor=h),c.bold=a,c.textAlign=egret.HorizontalAlign.CENTER,c.fontFamily=t.FONT_FAMILY,c},e.compare=function(t,e){return 1==t-e||-2==t-e?1:t==e?0:-1},e.newBg=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1);var i=new egret.Shape;return i.graphics.beginFill(t,e),i.graphics.drawRect(0,0,this.stageW,this.stageH),i},e.randClose=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},e.randBigOpen=function(t,e){return Math.floor(Math.random()*(e-t)+t)},e.setCenterAnchor=function(t){t.anchorOffsetX=t.width>>1,t.anchorOffsetY=t.height>>1},e.hitTestRect=function(t,e){var i=this.getObjRect(t),n=this.getObjRect(e);return i.intersects(n)},e.getObjRect=function(t){var e=t.localToGlobal().x-t.anchorOffsetX,i=t.localToGlobal().y-t.anchorOffsetY,n=t.parent?t.parent.scaleX:1,r=t.parent?t.parent.scaleY:1,o=n*t.scaleX*t.width,a=r*t.scaleY*t.height,s=new egret.Rectangle(e,i,o,a);return s},e.hitTestLayer=function(t,e){return Math.abs(t.x+t.width/2-(e.x+e.width/2))<=Math.abs((t.width+e.width)/2)&&Math.abs(t.y+t.height/2-(e.y+e.height/2))<=Math.abs((t.height+e.height)/2)},e.safeRemove=function(t){t&&t.parent&&t.parent.removeChild(t)},e.getRealTop=function(){var t=this.stageH/this.stageW,e=this.clientH/this.clientW,i=0,n=0;t>e?(n=e*this.stageH,i=this.stageW):(n=this.stageH,i=this.stageW/e)},e.renderAward=function(t,e){egret.ImageLoader.crossOrigin="";var i=e.lot_img_url;if(i)t.source=i;else switch(e.lot_type){case"微信红包":t.source="hongbao";break;case"线上优惠券":t.source="youhuiquan";break;case"线下优惠券":t.source="youhuiquan";break;case"流量包":t.source="liuliang";break;case"实物":t.source="shiwu"}},e.formatNumber=function(t,e,i){void 0===e&&(e=3),void 0===i&&(i=",");var n=t.toString();if(n.length<=e)return n;if(1==e)return n.split("").join(i);var r=[],o=n.length%e;r.push(n.slice(0,o));for(var a=o;a<n.length;a+=e){var s=n.slice(a,a+e);r.push(s)}return r.join(i)},e.shake=function(t,e,i,n,r,o,a){var s=this;void 0===e&&(e=null),void 0===i&&(i=20),void 0===n&&(n=20),void 0===r&&(r=100),void 0===o&&(o=200),void 0===a&&(a=30);var h=(new egret.Point(t.x,t.y),t.x),c=t.y,d=r,u=o,l=function(){r>0&&(t.x=t.x!=h?h:(.5<Math.random()?1:-1)*i+h,r--,i*=r/d),o>0&&(t.y=t.y!=c?c:(.5<Math.random()?1:-1)*n+c,o--,n*=o/u)},g=function(){t.x=h,t.y=c,m.removeEventListener(egret.TimerEvent.TIMER,l,s),m.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,g,s),m.stop(),s.isFunction(e)&&e()},p=r>o?i:n,m=new egret.Timer(1e3/a,p);m.addEventListener(egret.TimerEvent.TIMER,l,this),m.addEventListener(egret.TimerEvent.TIMER_COMPLETE,g,this),m.start()},e.isFunction=function(t){return"function"==typeof t},e.isNumber=function(t){return!isNaN(t)},e.setChildMaxIndex=function(t){t.parent&&t.parent.setChildIndex(t,t.parent.numChildren-1)},e}();t.Util=e}(windspirit||(windspirit={}));